<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical History</title>
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheets/app.css">
</head>
<body>
    <header class="navbar">
        <div class="chettinad">
            <img src="/photos/ChettinadLogo2.png" alt="img"><h1>Chettinad Hospital</h1>
        </div>
        <a class= "btn btn-warning" href="main_login.html">Sign Out</a>
    </header>

    <br>
    <h2>DOCTORS</h2>
    <br>
    <div class="search-container">
        <input type="text" name="search" placeholder="Search..." class="search-input" id="search-input">
        <a href="#" class="search-btn">
                <i class="fas fa-search"></i>      
        </a>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th scope="col">S. No.</th>
                <th scope="col">NAME</th>
                <th scope="col">ID</th>
                <th scope="col">MOB. NO.</th>
                <th scope="col">AGE</th>
                <th scope="col">SEX</th>
                <th scope="col">SPECIALITY</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <% for(let i=1; i<=doctors.length; i++) { %>
                <tr class="doctor-row">
                    <th scope="row"><%= i %></th>
                    <td class="name"><%= doctors[i-1].name %></td>
                    <td><%= doctors[i-1].ID %></td>
                    <td><%= doctors[i-1].mobile %></td>
                    <td><%= doctors[i-1].age %></td>
                    <td><%= doctors[i-1].sex %></td>
                    <td><%= doctors[i-1].speciality %></td>
                    <td><a class="btn btn-sm btn-info" href="/doctor/<%= doctors[i-1]._id %>">Edit</a></td>
                </tr>
            <% } %>
        </tbody>
    </table>
    <hr>

    <a class="btn btn-lg btn-info" href="/admin/<%= admin.name %>">BACK</a>
    <div class="footer">
        <h2>ABOUT</h2>
        <p>Chettinad Hospital & Research Institute (CHRI), a constituent college of Chettinad Academy of Research and Education (CARE), a Deemed to be University Under Section 3 of the UGC Act 1956 at Kelambakkam, Chennai through its primary health centre in the VIT, Vellore Campus provides round the clock primary (basic) health care services to all the students, staff and their dependents, faculty and their dependents and other employees working/residing at VIT Vellore Campus.</p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('search-input');
            const patientRows = document.querySelectorAll('.doctor-row');
    
            searchInput.addEventListener('input', function() {
                const searchTerm = searchInput.value.trim().toLowerCase();
                let visibleCount = 0;
    
                patientRows.forEach(row => {
                    const nameCell = row.querySelector('.name');
                    const name = nameCell.textContent.trim().toLowerCase();
                    
                    if (name.includes(searchTerm)) {
                        row.style.display = '';
                        visibleCount++;
                        row.querySelector('th').textContent = visibleCount;
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>